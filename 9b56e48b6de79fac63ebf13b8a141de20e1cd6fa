{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a9226890_01e5db9c",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1725686
      },
      "writtenOn": "2021-08-09T13:29:39Z",
      "side": 1,
      "message": "Is this required? Can we just check for (reason \u003d\u003d INITIATED_BY_SCREEN_ON) to know that we\u0027re not in a quiescent boot? During quiescent boot, no ACTION_SCREEN_ON broadcast is received.\n\nAlternatively, we could check for the HdmiControlManager power state: during a regular boot, the power state transitions to ON. During a quiescent boot, it remains in (transient to) standby.",
      "range": {
        "startLine": 393,
        "startChar": 12,
        "endLine": 393,
        "endChar": 35
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b87381b3_ba3c6fb6",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1068291
      },
      "writtenOn": "2021-08-09T14:16:14Z",
      "side": 1,
      "message": "I use mService, since it can access the PowerManager. This uses the boot reason and screen on status to determine if the boot was quiescent.\nThe state transition could be in transition to ON even during a regular boot. We may need a wait time to make sure that it remains in transition for a specific wait time before we decide that it is a quiescent boot.",
      "parentUuid": "a9226890_01e5db9c",
      "range": {
        "startLine": 393,
        "startChar": 12,
        "endLine": 393,
        "endChar": 35
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fcc9f55b_c53622bd",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1725686
      },
      "writtenOn": "2021-08-10T15:13:49Z",
      "side": 1,
      "message": "I was mistaken: during a regular boot, no ACTION_SCREEN_ON is broadcast either. So checking for the reason is not enough to differentiate a quiescent boot from a regular boot.",
      "parentUuid": "b87381b3_ba3c6fb6",
      "range": {
        "startLine": 393,
        "startChar": 12,
        "endLine": 393,
        "endChar": 35
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2d1171b_08f4aabd",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1468761
      },
      "writtenOn": "2021-08-12T14:34:53Z",
      "side": 1,
      "message": "At what time does this get called?\nIs boot completed by that point?\nI\u0027m wondering because it checks PowerManager#getLastSleepReason(), and a device only goes to sleep once quiescent boot *completes*.",
      "range": {
        "startLine": 393,
        "startChar": 8,
        "endLine": 393,
        "endChar": 36
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "802c1371_71204ac6",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1068291
      },
      "writtenOn": "2021-08-24T10:52:16Z",
      "side": 1,
      "message": "This is called when the HDMI service is started/restarted. This could happen before the boot completes. Would the combination of interactive status and last boot reason still be valid?",
      "parentUuid": "c2d1171b_08f4aabd",
      "range": {
        "startLine": 393,
        "startChar": 8,
        "endLine": 393,
        "endChar": 36
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "218728f5_d36d4b99",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1468761
      },
      "writtenOn": "2021-08-24T12:08:41Z",
      "side": 1,
      "message": "During quiescent boot the device is \"interactive\", and last sleep reason not yet set, so this method would return an incorrect result if called during boot.\nCould this action be delayed until after boot complete?\nOr could you check display state (Display.STATE_OFF during quiescent boot) instead?",
      "parentUuid": "802c1371_71204ac6",
      "range": {
        "startLine": 393,
        "startChar": 8,
        "endLine": 393,
        "endChar": 36
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5000f944_12c31573",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1725686
      },
      "writtenOn": "2021-08-31T15:37:03Z",
      "side": 1,
      "message": "\u003e Could this action be delayed until after boot complete?\nYes, let\u0027s do that. The HdmiControlManager power state is only set to \u0027ON\u0027 after boot complete, so it\u0027s fine to only turn on the Audio System after boot complete as well.",
      "parentUuid": "218728f5_d36d4b99",
      "range": {
        "startLine": 393,
        "startChar": 8,
        "endLine": 393,
        "endChar": 36
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16152dc9_c4f883aa",
        "filename": "services/core/java/com/android/server/hdmi/HdmiCecLocalDeviceAudioSystem.java",
        "patchSetId": 2
      },
      "lineNbr": 393,
      "author": {
        "id": 1068291
      },
      "writtenOn": "2021-10-12T10:35:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5000f944_12c31573",
      "range": {
        "startLine": 393,
        "startChar": 8,
        "endLine": 393,
        "endChar": 36
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ccc80366_cd03ccab",
        "filename": "services/core/java/com/android/server/hdmi/HdmiControlService.java",
        "patchSetId": 2
      },
      "lineNbr": 556,
      "author": {
        "id": 1725686
      },
      "writtenOn": "2021-08-10T15:13:49Z",
      "side": 1,
      "message": "isQuiescentBoot()",
      "range": {
        "startLine": 556,
        "startChar": 19,
        "endLine": 556,
        "endChar": 30
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77491eb9_00933279",
        "filename": "services/core/java/com/android/server/hdmi/HdmiControlService.java",
        "patchSetId": 2
      },
      "lineNbr": 556,
      "author": {
        "id": 1725686
      },
      "writtenOn": "2021-08-10T15:13:49Z",
      "side": 1,
      "message": "Better to keep this package-private.",
      "range": {
        "startLine": 556,
        "startChar": 4,
        "endLine": 556,
        "endChar": 11
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "03d3c51a_63efb1d6",
        "filename": "services/core/java/com/android/server/hdmi/HdmiControlService.java",
        "patchSetId": 2
      },
      "lineNbr": 556,
      "author": {
        "id": 1068291
      },
      "writtenOn": "2021-10-12T10:35:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77491eb9_00933279",
      "range": {
        "startLine": 556,
        "startChar": 4,
        "endLine": 556,
        "endChar": 11
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0d1a8896_6f211f7c",
        "filename": "services/core/java/com/android/server/hdmi/HdmiControlService.java",
        "patchSetId": 2
      },
      "lineNbr": 556,
      "author": {
        "id": 1068291
      },
      "writtenOn": "2021-10-12T10:35:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ccc80366_cd03ccab",
      "range": {
        "startLine": 556,
        "startChar": 19,
        "endLine": 556,
        "endChar": 30
      },
      "revId": "9b56e48b6de79fac63ebf13b8a141de20e1cd6fa",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}