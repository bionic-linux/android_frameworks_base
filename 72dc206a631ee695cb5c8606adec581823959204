{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cbc21a2e_3b5ffa31",
        "filename": "apex/jobscheduler/service/java/com/android/server/job/TEST_MAPPING",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1990655
      },
      "writtenOn": "2024-08-28T18:55:39Z",
      "side": 1,
      "message": "what\u0027s the guideline of module naming? if we\u0027re using package names\n1. it is difficult if we add 2 package names as include filter\n2. we have to keep consistency between module name and its include filter once changed. then we need to change gcl...\n\ncan it be: FrameworksServicesTests_server_job_ony?",
      "range": {
        "startLine": 33,
        "startChar": 45,
        "endLine": 33,
        "endChar": 67
      },
      "revId": "72dc206a631ee695cb5c8606adec581823959204",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd941f7c_08e50c52",
        "filename": "apex/jobscheduler/service/java/com/android/server/job/TEST_MAPPING",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1982145
      },
      "writtenOn": "2024-08-28T19:37:48Z",
      "side": 1,
      "message": "We don\u0027t have guidance for multiple filters and multiple excludes ðŸ˜ž\nI agree it is difficult to keep the Android.bp and TEST_MAPPING files in sync or to tell what the TEST_MAPPING file is testing. (I\u0027d still prefer we just added a \"module_name\" field to test_mapping and not do `test_module_config`.)\n\nThis originally was intended to only be used with TEST_MAPPING presubmit.\nIn gcl, you would just run the base.\n\nAlso, FYI, FrameworksServicesTests has several dirs/packages with the same suffix but different parts of the tree.  But it is the biggest one out there.",
      "parentUuid": "cbc21a2e_3b5ffa31",
      "range": {
        "startLine": 33,
        "startChar": 45,
        "endLine": 33,
        "endChar": 67
      },
      "revId": "72dc206a631ee695cb5c8606adec581823959204",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e26b5096_78c66986",
        "filename": "apex/jobscheduler/service/java/com/android/server/job/TEST_MAPPING",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1990655
      },
      "writtenOn": "2024-08-29T19:12:19Z",
      "side": 1,
      "message": "We may not have or may not want to define such guidance, but it\u0027s still important not to tie a module name with its implementation/configuration details. If we do so it\u0027s very hard to change the module name in future. We should not set such example.",
      "parentUuid": "dd941f7c_08e50c52",
      "range": {
        "startLine": 33,
        "startChar": 45,
        "endLine": 33,
        "endChar": 67
      },
      "revId": "72dc206a631ee695cb5c8606adec581823959204",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05d25478_4f9559fe",
        "filename": "apex/jobscheduler/service/java/com/android/server/job/TEST_MAPPING",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1982145
      },
      "writtenOn": "2024-08-29T19:19:22Z",
      "side": 1,
      "message": "Sorry, I\u0027m not sure I understand what you are suggesting.\nThe whole point of `test_module_config` was to give a set of options a name, that can be used on the command line rather than have an anonymous set in the TEST_MAPPING file.\nIf we don\u0027t like the name, Hadrien has suggested the users can always change it something they like better.\n@hzalek@google.com any suggestions here?",
      "parentUuid": "e26b5096_78c66986",
      "range": {
        "startLine": 33,
        "startChar": 45,
        "endLine": 33,
        "endChar": 67
      },
      "revId": "72dc206a631ee695cb5c8606adec581823959204",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc739511_5a226594",
        "filename": "apex/jobscheduler/service/java/com/android/server/job/TEST_MAPPING",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1480888
      },
      "writtenOn": "2024-08-29T21:02:11Z",
      "side": 1,
      "message": "I don\u0027t fully agree with \u0027not to tie a module name with its implementation/configuration details\u0027. More specifically, we\u0027re tying this name to \u0027what\u0027 it is and not \u0027how\u0027 it\u0027s implemented.\n\nIf users rarely define multiple includes I\u0027d just go with any name. To me it\u0027s a smell that this tests does too much. You _could_ split it into two `test_module_config` one for each logical entity and add those to TEST_MAPPING.",
      "parentUuid": "05d25478_4f9559fe",
      "range": {
        "startLine": 33,
        "startChar": 45,
        "endLine": 33,
        "endChar": 67
      },
      "revId": "72dc206a631ee695cb5c8606adec581823959204",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e259c67_e680e906",
        "filename": "apex/jobscheduler/service/java/com/android/server/job/TEST_MAPPING",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1990655
      },
      "writtenOn": "2024-09-03T18:14:25Z",
      "side": 1,
      "message": "By naming FrameworksServicesTests_com_android_server_job we are tying the name to how it\u0027s implemented. With such name it must include com.android.server.job. Why not instead name it \u0027FrameworksServicesTests_android_server_job\u0027?\n\nAt https://android-review.git.corp.google.com/c/platform/frameworks/base/+/3236900/6/services/accessibility/TEST_MAPPING we named a similar module \u0027FrameworksServicesTests_accessibility\u0027. We should unify the naming convention. And if it\u0027s unified, FrameworksServicesTests_accessibility/FrameworksServicesTests_android_server_job is a better practice.",
      "parentUuid": "cc739511_5a226594",
      "range": {
        "startLine": 33,
        "startChar": 45,
        "endLine": 33,
        "endChar": 67
      },
      "revId": "72dc206a631ee695cb5c8606adec581823959204",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4b91410_7ecd9ce7",
        "filename": "apex/jobscheduler/service/java/com/android/server/job/TEST_MAPPING",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1982145
      },
      "writtenOn": "2024-09-04T05:23:38Z",
      "side": 1,
      "message": "The issue here is that the name in the TEST_MAPPING must match the name in Android.bp.\nI could go back and rename Android.bp and then update these, but the test owner can do that as well.\n\nI have a larger CL to rename more Android.bp files with a script that has been evolving:\n  aosp/3250400\n\nThat script checks to see if there is a single include_filter, and if so uses the last two parts of the qualified name as the name.  If there are conflicts, I fix them by hand.\nIf there is also a single IncludeAnnotation (like @Presubmit), then I append that to the name as well.\n\ntest_module_config {\n    name: \"PowerServiceTests_server_power\",\n    base: \"PowerServiceTests\",\n    test_suites: [\n        \"automotive-tests\",\n        \"device-tests\",\n    ],\n    include_filters: [\"com.android.server.power\"],\n}\n\nThis TEST_MAPPING cls are about matching options in TEST_MAPPING to options created by test_module_config in Android.bp\nThe Android.bp cls are about naming.",
      "parentUuid": "3e259c67_e680e906",
      "range": {
        "startLine": 33,
        "startChar": 45,
        "endLine": 33,
        "endChar": 67
      },
      "revId": "72dc206a631ee695cb5c8606adec581823959204",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889"
    }
  ]
}